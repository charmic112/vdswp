"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5215],{5215:(st,C,u)=>{u.r(C),u.d(C,{HomePageModule:()=>it});var _=u(2200),c=u(9893),P=u(4341),x=u(8132),m=u(467),t=u(3664),d=u(2615),h=u(9330),v=u(7673),I=u(1985),j=u(8359);class R extends j.yU{constructor(s,i){super()}schedule(s,i=0){return this}}const k={setInterval(a,s,...i){const{delegate:e}=k;return e?.setInterval?e.setInterval(a,s,...i):setInterval(a,s,...i)},clearInterval(a){const{delegate:s}=k;return(s?.clearInterval||clearInterval)(a)},delegate:void 0};var U=u(7908);const y={now:()=>(y.delegate||Date).now(),delegate:void 0};class f{constructor(s,i=f.now){this.schedulerActionCtor=s,this.now=i}schedule(s,i=0,e){return new this.schedulerActionCtor(this,s).schedule(e,i)}}f.now=y.now;const E=new class $ extends f{constructor(s,i=f.now){super(s,i),this.actions=[],this._active=!1}flush(s){const{actions:i}=this;if(this._active)return void i.push(s);let e;this._active=!0;do{if(e=s.execute(s.state,s.delay))break}while(s=i.shift());if(this._active=!1,e){for(;s=i.shift();)s.unsubscribe();throw e}}}(class F extends R{constructor(s,i){super(s,i),this.scheduler=s,this.work=i,this.pending=!1}schedule(s,i=0){var e;if(this.closed)return this;this.state=s;const n=this.id,o=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(o,n,i)),this.pending=!0,this.delay=i,this.id=null!==(e=this.id)&&void 0!==e?e:this.requestAsyncId(o,this.id,i),this}requestAsyncId(s,i,e=0){return k.setInterval(s.flush.bind(s,this),e)}recycleAsyncId(s,i,e=0){if(null!=e&&this.delay===e&&!1===this.pending)return i;null!=i&&k.clearInterval(i)}execute(s,i){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const e=this._execute(s,i);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,i){let n,e=!1;try{this.work(s)}catch(o){e=!0,n=o||new Error("Scheduled action threw falsy error")}if(e)return this.unsubscribe(),n}unsubscribe(){if(!this.closed){const{id:s,scheduler:i}=this,{actions:e}=i;this.work=this.state=this.scheduler=null,this.pending=!1,(0,U.o)(e,this),null!=s&&(this.id=this.recycleAsyncId(i,s,null)),this.delay=null,super.unsubscribe()}}});var G=u(9470);var b=u(5558),V=u(9974),A=u(4360);function T(a,s=!1){return(0,V.N)((i,e)=>{let n=0;i.subscribe((0,A._)(e,o=>{const r=a(o,n++);(r||s)&&e.next(o),!r&&e.complete()}))})}var H=u(8141),B=u(9437);let N=(()=>{var a;class s{constructor(e){this.http=e,this.BASE_URL="https://api.arting.ai/api"}getSignedUrl(e){return this.http.post(`${this.BASE_URL}/cg/get_oss_signed_urls`,{f_suffixs:[e]}).pipe((0,b.n)(o=>{const r=o.data.oss_signed_urls[0];return(0,v.of)({put:r.put,get:r.get})}))}uploadFileToSignedUrl(e,n){const o=new h.Lr({"Content-Type":n.type});return this.http.put(e,n,{headers:o,observe:"response"})}startSwapTask(e){const{video:n,image:o,taskOptions:r}=e,p={task_type:2,file_type:"video",target_medio_url:n.remoteGetUrl,target_source_face_url:o.remoteGetUrl,duration:r.duration,start_clip_sec:r.start_clip_sec,end_clip_sec:r.end_clip_sec,face_enhance:r.face_enhance},l=new h.Lr({"content-type":"application/json",authorization:r.auth_token});return this.http.post(`${this.BASE_URL}/fs/gifvideo/mutilface`,p,{headers:l}).pipe((0,b.n)(g=>(0,v.of)(g.data)))}pollTaskStatus(e,n){return function D(a=0,s,i=E){let e=-1;return null!=s&&((0,G.m)(s)?i=s:e=s),new I.c(n=>{let o=function z(a){return a instanceof Date&&!isNaN(a)}(a)?+a-i.now():a;o<0&&(o=0);let r=0;return i.schedule(function(){n.closed||(n.next(r++),0<=e?this.schedule(void 0,e):n.complete())},o)})}(0,1e4).pipe(T(r=>r<60,!0),(0,b.n)(()=>{const r=new FormData;r.append("prediction_id",e),r.append("task_type","2"),r.append("rank","");const p=new h.Lr({authorization:n});return this.http.post(`${this.BASE_URL}/mfs/gifvideo/task/status`,r,{headers:p}).pipe((0,H.M)(l=>{}),(0,B.W)(l=>(console.error("Polling error:",l),(0,v.of)({data:{status:"fail"}}))))}),T(r=>"success"!==r.data.status&&"fail"!==r.data.status,!0),(0,b.n)(r=>(0,v.of)(r.data)))}static#t=a=()=>(this.\u0275fac=function(n){return new(n||s)(d.KVO(h.Qq))},this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}))}return a(),s})();const M="faceswap_media",O="faceswap_tasks";let Y=(()=>{var a;class s{constructor(){}save(e,n){localStorage.setItem(e,JSON.stringify(n))}load(e){const n=localStorage.getItem(e);return n?JSON.parse(n):null}saveMedia(e){this.save(M,e)}loadMedia(){return this.load(M)||[]}saveTasks(e){this.save(O,e)}loadTasks(){return this.load(O)||[]}static#t=a=()=>(this.\u0275fac=function(n){return new(n||s)},this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac,providedIn:"root"}))}return a(),s})();function X(a,s){if(1&a&&t.nrm(0,"ion-progress-bar",41),2&a){const i=t.XpG().$implicit;t.Y8G("value",i.uploadProgress/100)}}function L(a,s){if(1&a){const i=t.RV6();t.j41(0,"div",34)(1,"ion-thumbnail",35),t.nrm(2,"video",36),t.DNE(3,X,1,1,"ion-progress-bar",37),t.nrm(4,"ion-icon",38),t.j41(5,"ion-button",39),t.bIt("click",function(){const n=d.eBV(i).$implicit,o=t.XpG(2);return d.Njj(o.removeMedia(n))}),t.nrm(6,"ion-icon",40),t.k0s()()()}if(2&a){const i=s.$implicit;t.R7$(2),t.Y8G("src",i.localUrl,t.B4B),t.R7$(),t.Y8G("ngIf","uploading"===i.status),t.R7$(),t.Y8G("name","uploaded"===i.status?"cloud-done-outline":"fail"===i.status?"alert-circle-outline":"cloud-upload-outline")("color","uploaded"===i.status?"success":"fail"===i.status?"danger":"warning")}}function K(a,s){if(1&a&&t.nrm(0,"ion-progress-bar",41),2&a){const i=t.XpG().$implicit;t.Y8G("value",i.uploadProgress/100)}}function J(a,s){if(1&a){const i=t.RV6();t.j41(0,"div",34)(1,"ion-thumbnail",42),t.nrm(2,"ion-img",43),t.DNE(3,K,1,1,"ion-progress-bar",37),t.nrm(4,"ion-icon",38),t.j41(5,"ion-button",39),t.bIt("click",function(){const n=d.eBV(i).$implicit,o=t.XpG(2);return d.Njj(o.removeMedia(n))}),t.nrm(6,"ion-icon",40),t.k0s()()()}if(2&a){const i=s.$implicit;t.R7$(2),t.Y8G("src",i.localUrl),t.R7$(),t.Y8G("ngIf","uploading"===i.status),t.R7$(),t.Y8G("name","uploaded"===i.status?"cloud-done-outline":"fail"===i.status?"alert-circle-outline":"cloud-upload-outline")("color","uploaded"===i.status?"success":"fail"===i.status?"danger":"warning")}}function W(a,s){if(1&a){const i=t.RV6();t.j41(0,"div",21)(1,"ion-grid")(2,"ion-row")(3,"ion-col",22)(4,"h3",23),t.EFF(5),t.k0s(),t.j41(6,"ion-button",24),t.nrm(7,"ion-icon",25),t.EFF(8," Select Videos "),t.k0s(),t.j41(9,"input",26),t.bIt("change",function(n){d.eBV(i);const o=t.XpG();return d.Njj(o.onFileSelect(n,"video"))}),t.k0s(),t.j41(10,"div",27),t.DNE(11,L,7,4,"div",28),t.k0s()(),t.j41(12,"ion-col",29)(13,"h3",23),t.EFF(14),t.k0s(),t.j41(15,"ion-button",30),t.nrm(16,"ion-icon",31),t.EFF(17," Select Images "),t.k0s(),t.j41(18,"input",32),t.bIt("change",function(n){d.eBV(i);const o=t.XpG();return d.Njj(o.onFileSelect(n,"image"))}),t.k0s(),t.j41(19,"div",27),t.DNE(20,J,7,4,"div",28),t.j41(21,"ion-item")(22,"ion-toggle",33),t.mxI("ngModelChange",function(n){d.eBV(i);const o=t.XpG();return t.DH7(o.taskDefaults.face_enhance,n)||(o.taskDefaults.face_enhance=n),d.Njj(n)}),t.k0s()()()()()()()}if(2&a){const i=t.XpG();t.R7$(5),t.SpI("Target Videos (",i.uploadedVideos.length,")"),t.R7$(6),t.Y8G("ngForOf",i.uploadedVideos),t.R7$(3),t.SpI("Source Faces (",i.uploadedImages.length,")"),t.R7$(6),t.Y8G("ngForOf",i.uploadedImages),t.R7$(2),t.R50("ngModel",i.taskDefaults.face_enhance)}}function Z(a,s){if(1&a){const i=t.RV6();t.qex(0),t.j41(1,"ion-button",56),t.bIt("click",function(){d.eBV(i);const n=t.XpG().$implicit,o=t.XpG();return d.Njj(o.startSwap(n))}),t.nrm(2,"ion-icon",57),t.k0s(),t.bVm()}}function Q(a,s){if(1&a){const i=t.RV6();t.qex(0),t.j41(1,"ion-button",58),t.bIt("click",function(){d.eBV(i);const n=t.XpG().$implicit,o=t.XpG();return d.Njj(o.directDownload(n))}),t.nrm(2,"ion-icon",59),t.k0s(),t.j41(3,"ion-button",60),t.nrm(4,"ion-icon",61),t.k0s(),t.bVm()}if(2&a){const i=t.XpG().$implicit;t.R7$(3),t.Y8G("href",i.outputUrl)}}function q(a,s){1&a&&t.nrm(0,"ion-spinner",62)}function tt(a,s){if(1&a){const i=t.RV6();t.j41(0,"ion-col",44)(1,"div")(2,"ion-row")(3,"ion-col",45)(4,"div",46)(5,"div",47)(6,"ion-thumbnail",35),t.nrm(7,"video",36),t.k0s()(),t.nrm(8,"ion-icon",48),t.j41(9,"div",47)(10,"ion-thumbnail",42),t.nrm(11,"ion-img",43),t.k0s()()()(),t.j41(12,"ion-col",49),t.DNE(13,Z,3,0,"ng-container",50),t.j41(14,"ion-button",51),t.bIt("click",function(){const n=d.eBV(i).$implicit,o=t.XpG();return d.Njj(o.removeTask(n))}),t.nrm(15,"ion-icon",52),t.k0s(),t.DNE(16,Q,5,1,"ng-container",50),t.j41(17,"div",53)(18,"ion-chip",54)(19,"ion-label"),t.EFF(20),t.nI1(21,"uppercase"),t.k0s(),t.DNE(22,q,1,0,"ion-spinner",55),t.k0s()()()()()()}if(2&a){const i=s.$implicit,e=t.XpG();t.R7$(),t.HbH(t.VkB("task-card-wrapper ",i.status)),t.R7$(6),t.Y8G("src",i.video.localUrl,t.B4B),t.R7$(4),t.Y8G("src",i.image.localUrl),t.R7$(2),t.Y8G("ngIf","ready"===i.status||"fail"===i.status),t.R7$(3),t.Y8G("ngIf",("success"===i.status||"downloading"===i.status||"downloaded"===i.status||"download_failed"===i.status)&&i.outputUrl),t.R7$(2),t.Y8G("color",e.getChipColor(i.status)),t.R7$(2),t.JRh(t.bMT(21,10,i.status)),t.R7$(2),t.Y8G("ngIf","processing"===i.status)}}function et(a,s){1&a&&(t.j41(0,"ion-item",63)(1,"ion-label",64),t.EFF(2,"Upload at least one **Video** and one **Image** to create swap tasks."),t.k0s()())}const nt=[{path:"",component:(()=>{var a;class s{constructor(e,n,o,r,p){this.faceSwapService=e,this.persistenceService=n,this.toastController=o,this.alertController=r,this.loadingController=p,this.uploadedVideos=[],this.uploadedImages=[],this.swapTasks=[],this.activeSegment="media",this.taskDefaults={duration:100,start_clip_sec:0,end_clip_sec:100,face_enhance:!0},this.pollingSubs=new Map}ngOnInit(){this.loadState(),this.swapTasks.filter(e=>"processing"===e.status).forEach(e=>{this.resumeTaskPolling(e)})}startAllReadyTasks(){const e=this.swapTasks.filter(n=>"ready"===n.status||"fail"===n.status);0!==e.length?(e.forEach(n=>this.startSwap(n)),this.presentToast(`Starting ${e.length} swap tasks.`,"primary")):this.presentToast("No tasks are currently ready or fail to start.","medium")}loadState(){const e=this.persistenceService.loadMedia(),n=[];e.forEach(o=>{if("uploaded"===o.status&&o.remoteGetUrl){const r={id:o.id,file:new File([],o.remoteGetUrl,{type:"video"===o.type?"video/mp4":"image/png"}),type:o.type,status:"uploaded",localUrl:o.remoteGetUrl,uploadProgress:100,remoteGetUrl:o.remoteGetUrl,suffix:o.suffix,remotePutUrl:void 0,isRemote:!0};n.push(r)}}),this.uploadedVideos=n.filter(o=>"video"===o.type),this.uploadedImages=n.filter(o=>"image"===o.type),this.swapTasks=this.persistenceService.loadTasks(),this.swapTasks.forEach((o,r)=>{const p=this.uploadedVideos.find(g=>g.id===o.video.id),l=this.uploadedImages.find(g=>g.id===o.image.id);p&&l?(o.video=p,o.image=l,"processing"===o.status&&o.prediction_id&&this.resumeTaskPolling(o)):(this.swapTasks[r].status="fail",this.swapTasks[r].prediction_id=void 0)}),(this.uploadedVideos.length>0||this.uploadedImages.length>0)&&this.presentToast("Previous session restored.","primary")}saveState(){const e=[...this.uploadedVideos,...this.uploadedImages];this.persistenceService.saveMedia(e),this.persistenceService.saveTasks(this.swapTasks)}onFileSelect(e,n){var o=this;return(0,m.A)(function*(){const r=e.target.files;if(r)for(let p=0;p<r.length;p++){const l=r[p],g=l.name.split(".").pop()||"",w={id:crypto.randomUUID(),file:l,type:n,status:"pending",localUrl:URL.createObjectURL(l),uploadProgress:0,suffix:g,isRemote:!0};"video"===n?o.uploadedVideos.push(w):o.uploadedImages.push(w),o.saveState(),o.uploadMedia(w)}})()}uploadMedia(e){var n=this;return(0,m.A)(function*(){e.status="uploading",n.saveState();try{const{put:o,get:r}=yield n.faceSwapService.getSignedUrl(e.suffix).toPromise();e.remotePutUrl=o,e.remoteGetUrl=r,yield n.faceSwapService.uploadFileToSignedUrl(o,e.file).toPromise(),e.status="uploaded",e.uploadProgress=100,e.localUrl=e.remoteGetUrl,n.saveState(),n.presentToast(`${e.file.name} uploaded successfully.`,"success"),n.updateTasks()}catch(o){console.error("Upload fail:",o),e.status="fail",n.saveState(),n.presentToast(`Upload of ${e.file.name} fail.`,"danger")}})()}updateTasks(){const e=this.uploadedVideos.filter(l=>"uploaded"===l.status),n=this.uploadedImages.filter(l=>"uploaded"===l.status),o=[];e.forEach(l=>{n.forEach(g=>{this.swapTasks.find(S=>S.video.id===l.id&&S.image.id===g.id)||o.push({id:crypto.randomUUID(),video:l,image:g,taskOptions:{...this.taskDefaults,auth_token:crypto.randomUUID()},status:"ready",downloadStarted:!1,downloadCompleted:!1})})}),o.map(l=>l.id);const p=new Set([...e.map(l=>l.id),...n.map(l=>l.id)]);this.swapTasks=this.swapTasks.filter(l=>p.has(l.video.id)&&p.has(l.image.id)),this.swapTasks=[...this.swapTasks,...o],this.saveState()}startSwap(e){var n=this;return(0,m.A)(function*(){if("ready"===e.status||"fail"===e.status){e.status="processing",n.saveState();try{const{prediction_id:o}=yield n.faceSwapService.startSwapTask(e).toPromise();e.prediction_id=o,n.saveState(),n.resumeTaskPolling(e)}catch(o){console.error("Task start fail:",o),e.status="fail",n.saveState(),n.presentToast(`Swap for ${e.video.file.name} fail to start.`,"danger")}}})()}resumeTaskPolling(e){if(!e.prediction_id)return console.error("Cannot resume: missing prediction_id"),e.status="fail",void this.saveState();this.stopPolling(e.id);const n=this.faceSwapService.pollTaskStatus(e.prediction_id,e.taskOptions.auth_token).subscribe({next:o=>{e.status="waiting"===o.status?"processing":o.status,"success"===e.status?(e.outputUrl=o.output,this.stopPolling(e.id),this.presentToast(`Swap for ${e.video.file.name} successful!`,"success")):"fail"===e.status&&(this.stopPolling(e.id),this.presentToast(`Swap for ${e.video.file.name} fail.`,"danger")),this.saveState()},error:o=>{console.error("Polling complete with error:",o),e.status="fail",this.stopPolling(e.id),this.saveState(),this.presentToast(`Polling error for ${e.video.file.name}.`,"danger")}});this.pollingSubs.set(e.id,n)}stopPolling(e){this.pollingSubs.has(e)&&(this.pollingSubs.get(e)?.unsubscribe(),this.pollingSubs.delete(e))}presentToast(e){var n=this;return(0,m.A)(function*(o,r="medium"){(yield n.toastController.create({message:o,duration:3e3,color:r})).present()}).apply(this,arguments)}removeMedia(e){const n="video"===e.type?this.uploadedVideos:this.uploadedImages,o=n.findIndex(r=>r.id===e.id);o>-1&&(n.splice(o,1),URL.revokeObjectURL(e.localUrl),this.updateTasks(),this.saveState())}getChipColor(e){switch(e){case"ready":return"warning";case"processing":case"downloading":return"primary";case"success":case"downloaded":return"success";case"fail":return"danger";default:return"medium"}}getChipColor2(e){switch(e){case"ready":return"yellow";case"processing":return"blue";case"success":return"green";case"fail":return"red";default:return"grey"}}ngOnDestroy(){this.pollingSubs.forEach(e=>e.unsubscribe())}removeTask(e){this.stopPolling(e.id);const n=this.swapTasks.findIndex(o=>o.id===e.id);n>-1&&(this.swapTasks.splice(n,1),this.presentToast(`Task for ${e.video.file.name} removed.`,"medium")),this.saveState()}get readyOrfailTaskCount(){return(this.swapTasks??[]).filter(e=>"ready"===e.status||"fail"===e.status).length}get hasTasksToStart(){return this.readyOrfailTaskCount>0}removeAllVideoTasks(){0!==this.swapTasks.length||0!==this.uploadedVideos.length?(this.swapTasks.forEach(e=>this.stopPolling(e.id)),this.swapTasks=[],this.uploadedVideos.forEach(e=>URL.revokeObjectURL(e.localUrl)),this.uploadedVideos=[],this.saveState(),this.presentToast("All tasks and videos cleared. Source images remain.","success")):this.presentToast("No videos or tasks to clear.","medium")}get processingTaskCount(){return(this.swapTasks??[]).filter(e=>"processing"===e.status).length}get failedTaskCount(){return(this.swapTasks??[]).filter(e=>"fail"===e.status).length}get successTaskCount(){return(this.swapTasks??[]).filter(e=>"success"===e.status).length}get readyTaskCount(){return(this.swapTasks??[]).filter(e=>"ready"===e.status).length}get downloadingTaskCount(){return(this.swapTasks??[]).filter(e=>"downloading"===e.status).length}get completedTaskCount(){return(this.swapTasks??[]).filter(e=>"downloaded"===e.status).length}directDownload(e){var n=this;return(0,m.A)(function*(){if(!e.outputUrl)return void n.presentToast("Output URL not available.","danger");e.downloadStarted=!0,e.status="downloading";const o="swapped_"+ +new Date+".mp4";try{n.presentToast(`Downloading ${o} (may take time)...`,"primary");const r=yield fetch(e.outputUrl).then(g=>{if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);return g.blob()}),p=URL.createObjectURL(r),l=document.createElement("a");l.href=p,l.download=o,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(p),n.presentToast("Download started successfully.","success"),e.downloadCompleted=!0,e.status="downloaded",n.saveState()}catch(r){console.error("Download failed:",r),n.presentToast("Failed to download video.","danger"),e.status="download_failed",n.saveState()}})()}downloadAllTasks(){(this.swapTasks??[]).filter(n=>n.outputUrl&&"downloading"!=n.status&&"downloaded"!=n.status).forEach(n=>this.directDownload(n))}static#t=a=()=>(this.\u0275fac=function(n){return new(n||s)(t.rXU(N),t.rXU(Y),t.rXU(c.K_),t.rXU(c.hG),t.rXU(c.Xi))},this.\u0275cmp=t.VBU({type:s,selectors:[["app-home"]],standalone:!1,decls:44,vars:13,consts:[[1,"ion-padding"],["color","light"],[1,"ion-no-padding-top"],["class","media-content",4,"ngIf"],["color","light",1,"ion-margin-top"],[1,"ion-padding-bottom"],["size","2"],[1,"action-row","ion-align-items-center","ion-margin-top"],["size","9",1,"ion-no-padding"],["expand","block","color","success",3,"click","disabled"],["slot","start","name","play-skip-forward-outline"],["size","2",1,"ion-no-padding"],["expand","block","color","primary",3,"click"],["slot","start","name","download-outline"],["size","1",1,"ion-no-padding","ion-text-right"],["color","danger","fill","outline","size","default",1,"clear-all-btn-lg",3,"click","disabled"],["name","trash-bin-outline","slot","icon-only"],[1,"ion-no-padding-vertical"],[1,"task-grid"],["size","12","size-sm","6","size-md","4","size-lg","3","class","task-card-col",4,"ngFor","ngForOf"],["lines","none","class","ion-margin-top",4,"ngIf"],[1,"media-content"],["size","12","size-md","6",1,"ion-padding-bottom"],[1,"ion-text-center","ion-no-margin"],["expand","block","size","small","color","secondary","onclick","document.getElementById('videoFile').click()"],["slot","start","name","videocam-outline"],["type","file","id","videoFile","multiple","","accept","video/*","hidden","",3,"change"],[1,"media-container","ion-margin-top"],["class","media-item",4,"ngFor","ngForOf"],["size","12","size-md","6"],["expand","block","size","small","color","tertiary","onclick","document.getElementById('imageFile').click()"],["slot","start","name","image-outline"],["type","file","id","imageFile","multiple","","accept","image/*","hidden","",3,"change"],["color","tertiary",3,"ngModelChange","ngModel"],[1,"media-item"],[1,"rounded-border","video-thumb"],["preload","metadata",3,"src"],["color","tertiary",3,"value",4,"ngIf"],[1,"status-icon",3,"name","color"],["color","danger","size","small",1,"remove-btn",3,"click"],["name","close-circle"],["color","tertiary",3,"value"],[1,"rounded-border","image-thumb"],[3,"src"],["size","12","size-sm","6","size-md","4","size-lg","3",1,"task-card-col"],["size","5.5"],[1,"task-media-preview"],[1,"media-thumb-wrapper"],["name","swap-horizontal-outline","color","tertiary","size","small",1,"swap-icon"],["size","6.5"],[4,"ngIf"],["color","danger","size","small",3,"click"],["name","trash-bin-outline"],[1,"task-status-chip"],[3,"color"],["name","dots",4,"ngIf"],["color","primary","size","small",3,"click"],["name","play-circle-outline","slot","start"],["color","success","size","small",3,"click"],["name","download-outline"],["target","_blank","color","primary","size","small",3,"href"],["name","open-outline"],["name","dots"],["lines","none",1,"ion-margin-top"],[1,"ion-text-center","ion-padding-vertical"]],template:function(n,o){1&n&&(t.j41(0,"ion-content",0)(1,"ion-card",1)(2,"ion-card-content",2),t.DNE(3,W,23,5,"div",3),t.k0s()(),t.j41(4,"ion-card",4)(5,"ion-card-header",5)(6,"ion-card-title",5),t.EFF(7),t.k0s(),t.j41(8,"ion-row")(9,"ion-col",6)(10,"ion-text"),t.EFF(11),t.k0s()(),t.j41(12,"ion-col",6)(13,"ion-text"),t.EFF(14),t.k0s()(),t.j41(15,"ion-col",6)(16,"ion-text"),t.EFF(17),t.k0s()(),t.j41(18,"ion-col",6)(19,"ion-text"),t.EFF(20),t.k0s()(),t.j41(21,"ion-col",6)(22,"ion-text"),t.EFF(23),t.k0s()(),t.j41(24,"ion-col",6)(25,"ion-text"),t.EFF(26),t.k0s()()(),t.j41(27,"ion-row",7)(28,"ion-col",8)(29,"ion-button",9),t.bIt("click",function(){return o.startAllReadyTasks()}),t.nrm(30,"ion-icon",10),t.EFF(31),t.k0s()(),t.j41(32,"ion-col",11)(33,"ion-button",12),t.bIt("click",function(){return o.downloadAllTasks()}),t.nrm(34,"ion-icon",13),t.EFF(35," Download All "),t.k0s()(),t.j41(36,"ion-col",14)(37,"ion-button",15),t.bIt("click",function(){return o.removeAllVideoTasks()}),t.nrm(38,"ion-icon",16),t.k0s()()()(),t.j41(39,"ion-card-content",17)(40,"ion-grid",18)(41,"ion-row"),t.DNE(42,tt,23,12,"ion-col",19),t.k0s()(),t.DNE(43,et,3,0,"ion-item",20),t.k0s()()()),2&n&&(t.R7$(3),t.Y8G("ngIf","media"===o.activeSegment),t.R7$(4),t.SpI("2. Face Swap Tasks (",o.swapTasks.length,")"),t.R7$(4),t.SpI("Ready: ",o.readyTaskCount),t.R7$(3),t.SpI("Processing: ",o.processingTaskCount),t.R7$(3),t.SpI("Failed: ",o.failedTaskCount),t.R7$(3),t.SpI("Success: ",o.successTaskCount),t.R7$(3),t.SpI("Downloading: ",o.downloadingTaskCount),t.R7$(3),t.SpI("Downloaded: ",o.completedTaskCount),t.R7$(3),t.Y8G("disabled",!o.hasTasksToStart),t.R7$(2),t.SpI(" Start All Conversions (",o.readyOrfailTaskCount,") "),t.R7$(6),t.Y8G("disabled",0===o.swapTasks.length&&0===o.uploadedVideos.length),t.R7$(5),t.Y8G("ngForOf",o.swapTasks),t.R7$(),t.Y8G("ngIf",!o.swapTasks.length))},dependencies:[_.Sq,_.bT,P.BC,P.vS,c.Jm,c.b_,c.I9,c.ME,c.tN,c.ZB,c.hU,c.W9,c.lO,c.iq,c.KW,c.uz,c.he,c.FH,c.ln,c.w2,c.IO,c.Zx,c.BY,c.hB,_.Pc],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: #4A148C}ion-content[_ngcontent-%COMP%]{--ion-background-color: #f0f4f8}ion-card[_ngcontent-%COMP%]{box-shadow:0 4px 15px #0000001a;border-radius:12px}ion-card-header.minimal-header[_ngcontent-%COMP%]{padding-bottom:0}ion-segment[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}.minimal-setting-item[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px}.minimal-setting-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.75rem;margin-top:0;margin-bottom:5px;color:var(--ion-color-medium-shade)}.ultra-minimal-input[_ngcontent-%COMP%]{--inner-padding-top: 5px;--inner-padding-bottom: 5px;--padding-start: 0;--padding-end: 0}.ultra-minimal-input[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{font-size:.9rem}.ultra-minimal-input[_ngcontent-%COMP%]   ion-label[position=stacked][_ngcontent-%COMP%]{margin-bottom:3px;font-size:.8rem;font-weight:700}.clip-label[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium)}ion-button[color=secondary][_ngcontent-%COMP%]{--background: #00BCD4}ion-button[color=tertiary][_ngcontent-%COMP%]{--background: #FF4081}.media-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}.media-item[_ngcontent-%COMP%]{width:50px;text-align:center;position:relative;height:100px}.media-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem;margin-top:5px;color:#333}.media-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px}.rounded-border[_ngcontent-%COMP%]{--border-radius: 8px;overflow:hidden;position:relative;border:3px solid var(--ion-color-tertiary);box-shadow:0 2px 5px #0003}.rounded-border[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .rounded-border[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{display:block;width:100%;height:100%;object-fit:cover}.status-icon[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;font-size:1.2rem;background:#fff;border-radius:50%;padding:1px;z-index:10}.remove-btn[_ngcontent-%COMP%]{position:absolute;top:-5px;left:-5px;z-index:10;--padding-start: 0;--padding-end: 0;--box-shadow: none;--background: var(--ion-color-danger);border-radius:50%}.task-card[_ngcontent-%COMP%]{--padding-start: 0;--inner-padding-end: 0;--min-height: 110px;border-bottom:1px solid #ddd}.task-card[_ngcontent-%COMP%]:last-child{border-bottom:none}ion-chip[_ngcontent-%COMP%]{min-width:80px;justify-content:center}.task-actions[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-bottom:5px!important}.task-actions[_ngcontent-%COMP%]   ion-button[fill=clear][_ngcontent-%COMP%]{margin-top:-5px!important}ion-card-content.ion-no-padding-vertical[_ngcontent-%COMP%]{padding-top:0;padding-bottom:0}.task-grid[_ngcontent-%COMP%]{padding-left:0;padding-right:0}.task-grid[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{align-items:stretch}.task-card-col[_ngcontent-%COMP%]{padding:8px}.task-card-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 2px 8px #0000001a;padding:12px 0 0 12px;height:100%;display:flex;flex-direction:column;transition:all .2s ease-in-out}.task-card-wrapper.fail[_ngcontent-%COMP%]{border:2px solid var(--ion-color-danger)}.task-card-wrapper[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.task-media-preview[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.media-thumb-wrapper[_ngcontent-%COMP%]{width:auto;height:70px}.video-thumb[_ngcontent-%COMP%], .image-thumb[_ngcontent-%COMP%]{--size: 100%;margin:0;border:none}.video-thumb[_ngcontent-%COMP%]   .rounded-border[_ngcontent-%COMP%], .image-thumb[_ngcontent-%COMP%]   .rounded-border[_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary)}.swap-icon[_ngcontent-%COMP%]{font-size:1.5rem;color:var(--ion-color-tertiary)}.task-status-chip[_ngcontent-%COMP%]{text-align:center;margin-bottom:10px}.task-status-chip[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{min-width:100px;font-size:.75rem}.task-details[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:10px}.task-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;margin-top:2px;color:#555}.task-details[_ngcontent-%COMP%]   .status-message[_ngcontent-%COMP%]{font-weight:700}.task-actions-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center}.task-actions-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--padding-start: 5px;--padding-end: 5px;font-size:.75rem;height:30px;margin:0 2px}.task-actions-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]:not([expand=block]){width:45%}@media (max-width: 576px){.task-actions-footer[_ngcontent-%COMP%]{flex-direction:column}.task-actions-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:100%;margin:2px 0}}.task-media-preview[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .task-media-preview[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{object-fit:cover;width:100%;height:100%}.header-with-actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-bottom:0}.header-with-actions[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{flex-grow:1;margin-right:10px}.header-with-actions[_ngcontent-%COMP%]   ion-button[expand=block][_ngcontent-%COMP%]{margin-top:0!important}.clear-all-btn[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;margin:0 0 10px}.stats-bar[_ngcontent-%COMP%]{margin-bottom:10px}.stat-tile[_ngcontent-%COMP%]{background:#fff;padding:10px;text-align:center;border-radius:8px;box-shadow:0 2px 5px #0000001a;height:100%;border-left:5px solid}.stat-tile.primary[_ngcontent-%COMP%]{border-color:var(--ion-color-primary)}.stat-tile.warning[_ngcontent-%COMP%]{border-color:var(--ion-color-warning)}.stat-tile.danger[_ngcontent-%COMP%]{border-color:var(--ion-color-danger)}.stat-tile.success[_ngcontent-%COMP%]{border-color:var(--ion-color-success)}.stat-tile[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:2rem;opacity:.6}.stat-tile[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8rem;color:var(--ion-color-medium);margin:0}.stat-tile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;margin:0;font-weight:600;color:#333}.action-row[_ngcontent-%COMP%]{width:100%}.action-row[_ngcontent-%COMP%]   .clear-all-btn-lg[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;height:40px}"]}))}return a(),s})()}];let ot=(()=>{var a;class s{static#t=a=()=>(this.\u0275fac=function(n){return new(n||s)},this.\u0275mod=t.$C({type:s}),this.\u0275inj=d.G2t({imports:[x.iI.forChild(nt),x.iI]}))}return a(),s})(),it=(()=>{var a;class s{static#t=a=()=>(this.\u0275fac=function(n){return new(n||s)},this.\u0275mod=t.$C({type:s}),this.\u0275inj=d.G2t({imports:[_.MD,P.YN,c.bv,ot,h.q1]}))}return a(),s})()}}]);